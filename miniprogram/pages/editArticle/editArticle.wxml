<cu-custom bgColor="bg-gradual-pink" isBack="{{true}}">
    <view slot="backText">返回</view>
    <view slot="content">编辑文章</view>
</cu-custom>
<form>
    <view class="cu-form-group margin-top">
        <view class="title">文章类型</view>
        <picker bindchange="PickerChange" value="{{typeIndex}}" range="{{picker}}">
            <view class="picker">{{picker[typeIndex]}}</view>
        </picker>
    </view>
    <view class="cu-form-group margin-top">
        <view class="title">标题</view>
        <input placeholder="请输入..." bindinput="getTitle" value="{{title}}"></input>
    </view>
    <view class="cu-form-group">
        <textarea maxlength="300" bindinput="getContent" placeholder="正文" value="{{content}}" style="height:200px"></textarea>
    </view>
    <view class="cu-list menu">
        <view class="cu-item">
            <text class="text-grey text-sm">{{length}}/300</text>
        </view>
    </view>
    <view class="cu-bar bg-white margin-top">
        <view class="action">图片上传</view>
        <view class="action">{{imgList.length}}/9</view>
    </view>
    <view class="cu-form-group">
        <view class="grid col-4 grid-square flex-sub">
            <view class="bg-img" wx:for="{{imgList}}" wx:key="{{index}}" bindtap="previewImage" data-url="{{imgList[index]}}">
                <image src='{{imgList[index]}}' mode='aspectFill'></image>
                <view class="cu-tag bg-red" catchtap="deleteImage" data-index="{{index}}">
                    <text class="cuIcon-close"></text>
                </view>
            </view>
            <view class="solids" bindtap="chooseImage" wx:if="{{imgList.length<9}}">
                <text class="cuIcon-cameraadd"></text>
            </view>
        </view>
    </view>
</form>
<view class="cu-list menu margin-top" wx:if="{{typeIndex}}">
    <view class="cu-item">
        <view class="content padding-tb-sm">
            <view>
                <text class="cuIcon-link text-blue margin-right-xs"></text>
                关联的文章
            </view>
            <block wx:for="{{relationTitle}}" wx:key="*this">
                <view class="text-gray text-sm">
                    <text class="cuIcon-list margin-right-xs"></text>
                    {{item}}
                </view>
            </block>
        </view>
    </view>
</view>
<view class="box margin-top-xl">
    <view class="cu-bar btn-group">
        <button disabled="{{typeIndex==0?true:false}}" class="cu-btn bg-blue shadow-blur round" catch:tap="tapToSelectRelate">
            选择关联文章
        </button>
        <button class="cu-btn bg-green shadow-blur round" catch:tap="tapToSubmit">提交</button>
    </view>
</view>